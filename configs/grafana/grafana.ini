# Grafana Configuration
# AIOps-Platform 监控仪表板配置
# 版本: 1.0.0

# ===========================================
# 应用程序设置
# ===========================================
[default]
# 实例名称
instance_name = aiops-platform

[paths]
# 数据目录
data = /var/lib/grafana
# 临时文件目录
temp_data_lifetime = 24h
# 日志目录
logs = /var/log/grafana
# 插件目录
plugins = /var/lib/grafana/plugins
# 配置目录
provisioning = /etc/grafana/provisioning

# ===========================================
# 服务器配置
# ===========================================
[server]
# 协议 (http, https, h2, socket)
protocol = http
# 监听地址
http_addr = 0.0.0.0
# 监听端口
http_port = 3000
# 域名
domain = grafana.localhost
# 是否强制使用HTTPS
enforce_domain = false
# 根URL
root_url = http://grafana.localhost
# 是否提供静态文件
serve_from_sub_path = false
# 路由器日志
router_logging = false
# 静态根路径
static_root_path = public
# 是否启用gzip
enable_gzip = true
# 证书文件
# cert_file =
# 证书密钥文件
# cert_key =
# Socket路径
# socket =
# CDN URL
# cdn_url =
# 读取超时
read_timeout = 0

# ===========================================
# 数据库配置
# ===========================================
[database]
# 数据库类型 (mysql, postgres, sqlite3)
type = sqlite3
# 数据库主机
host = 127.0.0.1:3306
# 数据库名称
name = grafana
# 数据库用户
user = root
# 数据库密码
password =
# 数据库URL
url = sqlite3:///var/lib/grafana/grafana.db
# SSL模式
ssl_mode = disable
# CA证书路径
# ca_cert_path =
# 客户端密钥路径
# client_key_path =
# 客户端证书路径
# client_cert_path =
# 服务器证书名称
# server_cert_name =
# 连接池最大打开连接数
max_open_conn = 0
# 连接池最大空闲连接数
max_idle_conn = 2
# 连接最大生存时间
conn_max_lifetime = 14400
# 日志查询
log_queries = false
# 查询重试
query_retries = 0
# 事务重试
transaction_retries = 5

# ===========================================
# 远程缓存配置
# ===========================================
[remote_cache]
# 缓存类型 (database, redis, memcached)
type = database
# 连接字符串
# connstr =

# ===========================================
# 数据代理配置
# ===========================================
[dataproxy]
# 日志记录
logging = false
# 超时时间
timeout = 30
# 拨号超时
dial_timeout = 30
# 保持连接时间
keep_alive_seconds = 30
# TLS握手超时
tls_handshake_timeout = 10
# 期望继续超时
expect_continue_timeout = 1
# 最大空闲连接数
max_idle_connections = 100
# 最大空闲连接数每个主机
max_idle_connections_per_host = 6
# 发送用户头
send_user_header = false

# ===========================================
# 分析配置
# ===========================================
[analytics]
# 报告启用
reporting_enabled = false
# 报告分布式跟踪
reporting_distributor = grafana-labs
# 检查更新
check_for_updates = false
# 检查插件更新
check_for_plugin_updates = false
# Google Analytics通用ID
# google_analytics_universal_id =
# Google Analytics 4 ID
# google_analytics_4_id =
# Google Tag Manager ID
# google_tag_manager_id =
# Rudder Stack写入密钥
# rudderstack_write_key =
# Rudder Stack数据平面URL
# rudderstack_data_plane_url =
# Rudder Stack SDK URL
# rudderstack_sdk_url =
# 应用洞察连接字符串
# application_insights_connection_string =
# 应用洞察端点URL
# application_insights_endpoint_url =

# ===========================================
# 安全配置
# ===========================================
[security]
# 管理员用户
admin_user = admin
# 管理员密码
admin_password = admin123
# 管理员邮箱
admin_email = admin@aiops-platform.com
# 密钥
secret_key = SW2YcwTIb9zpOOhoPsMm
# 登录记住天数
login_remember_days = 7
# Cookie用户名
cookie_username = grafana_user
# Cookie记住名称
cookie_remember_name = grafana_remember
# 禁用Gravatar
disable_gravatar = true
# 数据源代理白名单
data_source_proxy_whitelist =
# 禁用暴力破解保护
disable_brute_force_login_protection = false
# Cookie安全
cookie_secure = false
# Cookie SameSite
cookie_samesite = lax
# 允许嵌入
allow_embedding = false
# 严格传输安全
strict_transport_security = false
# 严格传输安全最大年龄
strict_transport_security_max_age_seconds = 86400
# 严格传输安全预加载
strict_transport_security_preload = false
# 严格传输安全包含子域
strict_transport_security_subdomains = false
# X-Content-Type-Options
x_content_type_options = true
# X-XSS-Protection
x_xss_protection = true
# 内容安全策略
content_security_policy = false
# 内容安全策略模板
content_security_policy_template = ""

# ===========================================
# 快照配置
# ===========================================
[snapshots]
# 外部启用
external_enabled = true
# 外部快照URL
external_snapshot_url = https://snapshots-origin.raintank.io
# 外部快照名称
external_snapshot_name = Publish to snapshot.raintank.io
# 快照移除过期
snapshot_remove_expired = true

# ===========================================
# 仪表板配置
# ===========================================
[dashboards]
# 版本保留
versions_to_keep = 20
# 最小刷新间隔
min_refresh_interval = 5s
# 默认主页仪表板路径
default_home_dashboard_path =

# ===========================================
# 用户配置
# ===========================================
[users]
# 允许注册
allow_sign_up = false
# 允许组织创建
allow_org_create = false
# 自动分配组织
auto_assign_org = true
# 自动分配组织ID
auto_assign_org_id = 1
# 自动分配组织角色
auto_assign_org_role = Viewer
# 验证邮箱启用
verify_email_enabled = false
# 登录提示
login_hint = email or username
# 密码提示
password_hint = password
# 默认主题
default_theme = dark
# 外部管理链接URL
# external_manage_link_url =
# 外部管理链接名称
# external_manage_link_name =
# 外部管理信息
# external_manage_info =
# 查看器可以编辑
viewers_can_edit = false
# 编辑器可以管理
editors_can_admin = false
# 用户搜索过滤器
# user_search_filter =

# ===========================================
# 认证配置
# ===========================================
[auth]
# 登录最大无效尝试次数
login_maximum_inactive_lifetime_duration = 7d
# 登录最大生存时间
login_maximum_lifetime_duration = 30d
# 令牌轮换间隔分钟数
token_rotation_interval_minutes = 10
# 禁用登录表单
disable_login_form = false
# 禁用注销菜单
disable_signout_menu = false
# 注销重定向URL
signout_redirect_url =
# OAuth自动登录
oauth_auto_login = false
# OAuth状态cookie最大年龄
oauth_state_cookie_max_age = 600
# API密钥最大秒数生存时间
api_key_max_seconds_to_live = -1

# ===========================================
# 匿名认证
# ===========================================
[auth.anonymous]
# 启用匿名访问
enabled = false
# 组织名称
org_name = Main Org.
# 组织角色
org_role = Viewer
# 隐藏版本
hide_version = false

# ===========================================
# 基本认证
# ===========================================
[auth.basic]
# 启用基本认证
enabled = true

# ===========================================
# LDAP认证
# ===========================================
[auth.ldap]
# 启用LDAP
enabled = false
# 配置文件
config_file = /etc/grafana/ldap.toml
# 允许注册
allow_sign_up = true
# 同步cron
sync_cron = "0 0 1 * * *"
# 活跃同步启用
active_sync_enabled = true

# ===========================================
# SMTP配置
# ===========================================
[smtp]
# 启用SMTP
enabled = false
# SMTP主机
host = localhost:587
# SMTP用户
user =
# SMTP密码
password =
# 证书文件
# cert_file =
# 密钥文件
# key_file =
# 跳过验证
skip_verify = false
# 发件人地址
from_address = admin@grafana.localhost
# 发件人名称
from_name = Grafana
# EHLO身份
ehlo_identity = dashboard.example.com
# 启动TLS策略
startTLS_policy = OpportunisticStartTLS

# ===========================================
# 日志配置
# ===========================================
[log]
# 日志模式 (console, file, syslog)
mode = console
# 日志级别 (trace, debug, info, warn, error, critical)
level = info
# 过滤器
filters =

# 控制台日志配置
[log.console]
# 日志级别
level =
# 日志格式 (text, json)
format = console

# 文件日志配置
[log.file]
# 日志级别
level =
# 日志格式
format = text
# 日志文件路径
log_rotate = true
# 最大日志大小
max_lines = 1000000
# 最大大小偏移
max_size_shift = 28
# 每日轮转
daily_rotate = true
# 最大天数
max_days = 7

# Syslog日志配置
[log.syslog]
# 日志级别
level =
# 日志格式
format = text
# 网络
network = udp
# 地址
address = localhost:514
# 设施
facility = local0
# 标签
tag =

# ===========================================
# 指标配置
# ===========================================
[metrics]
# 启用指标
enabled = true
# 基本认证用户名
basic_auth_username =
# 基本认证密码
basic_auth_password =
# 间隔秒数
interval_seconds = 10
# 禁用总统计
disable_total_stats = false

# Graphite指标
[metrics.graphite]
# 地址
address =
# 前缀
prefix = prod.grafana.%(instance_name)s.

# ===========================================
# 分布式跟踪配置
# ===========================================
[tracing.jaeger]
# 地址
address = localhost:6831
# 总是包含模式
always_included_tag = tag1:value1
# 采样器类型
sampler_type = const
# 采样器参数
sampler_param = 1
# 采样服务器URL
sampling_server_url =
# 禁用共享zipkin跨度
disable_shared_zipkin_spans = false

# ===========================================
# Grafana.com集成
# ===========================================
[grafana_com]
# URL
url = https://grafana.com

# ===========================================
# 外部图像存储
# ===========================================
[external_image_storage]
# 提供商
provider =

# S3外部图像存储
[external_image_storage.s3]
# 端点
endpoint =
# 路径样式访问
path_style_access = false
# 存储桶URL
bucket_url =
# 存储桶
bucket =
# 区域
region =
# 路径
path =
# 访问密钥
access_key =
# 密钥
secret_key =

# ===========================================
# 警报配置
# ===========================================
[alerting]
# 启用警报
enabled = true
# 执行超时秒数
execute_alerts = true
# 错误或超时
error_or_timeout = alerting
# 无数据或空值
nodata_or_nullvalues = no_alerting
# 并发渲染限制
concurrent_render_limit = 5
# 评估超时秒数
evaluation_timeout_seconds = 30
# 通知超时秒数
notification_timeout_seconds = 30
# 最大尝试次数
max_attempts = 3
# 最小间隔秒数
min_interval_seconds = 1
# 最大注释长度
max_annotation_length = 500000

# ===========================================
# 统一警报配置
# ===========================================
[unified_alerting]
# 启用统一警报
enabled = false
# 禁用传统警报
disabled_orgs =
# 管理员配置轮询间隔
admin_config_poll_interval = 60s
# 警报规则最大尝试次数
alertrule_max_attempts = 1
# 警报规则最小间隔
min_interval = 10s
# 最大注释长度
max_annotation_length = 500000

# ===========================================
# 注释配置
# ===========================================
[annotations.dashboard]
# 启用仪表板注释
enabled = true

[annotations.api]
# 启用API注释
enabled = true

# ===========================================
# 探索配置
# ===========================================
[explore]
# 启用探索
enabled = true

# ===========================================
# 帮助配置
# ===========================================
[help]
# 启用帮助
enabled = true

# ===========================================
# 配置文件配置
# ===========================================
[profile]
# 启用配置文件
enabled = true

# ===========================================
# 查询历史配置
# ===========================================
[query_history]
# 启用查询历史
enabled = true

# ===========================================
# 功能切换配置
# ===========================================
[feature_toggles]
# 启用功能切换
enable = publicDashboards

# ===========================================
# 日期格式配置
# ===========================================
[date_formats]
# 完整日期
full_date = YYYY-MM-DD HH:mm:ss
# 间隔秒
interval_second = HH:mm:ss
# 间隔分钟
interval_minute = HH:mm
# 间隔小时
interval_hour = MM/DD HH:mm
# 间隔天
interval_day = MM/DD
# 间隔月
interval_month = YYYY-MM
# 间隔年
interval_year = YYYY
# 使用浏览器区域设置
use_browser_locale = false
# 默认时区
default_timezone = browser